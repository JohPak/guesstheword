<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Guess the Word</title>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  </head>
  <body>

    <div id="app">

    <h1>Guess the Word</h1>
    
    <!-- <div v-html="sanalista[0]" class="app"></div> -->


    <button @click="getAnswer">Get definition</button>
    <button @click="getRandomWord">Get word</button>
    <h6>Definition: </h6> 


    </div>


    <script>
      var app = new Vue
      ({
          el: "#app",
          data: {
            //lista: ["eka", "toka"],
            sanalista: [],
            axios_url_start: "https://dictionaryapi.com/api/v3/references/learners/json/",
            searchword: "sheep",
            axios_url_end: "?key=5375d6d8-6ba2-4831-b6e0-e1660a4c076d",
            },
        methods: {
              getAnswer: function () {

                axios.get(this.axios_url_start + this.searchword + this.axios_url_end)
                    .then(function (response) {
                        app.answer = response.data.answer;
                        console.log(response.data);
                    })
                    .catch(function (error) {
                        app.answer = 'Error! ' + error;
                        console.log(app.answer);
                    })  
            },  
                
            getRandomWord: function () { 
                  // luetaan sanat tiedostosta listalle
                    $.ajax({
                    url:'sanat.txt',
                    success: function (data){
                        //pilkotaan tiedoston rivit taulukkoon 
                        let lines = data.split('\n');
                        for (let i = 0; i < lines.length; i++) {
                            this.sanalista.push(lines[i]);
                        }
                        console.log("Sanat lisätty listaan");
                        }.bind(this)
                    });
                }   
                //TOIMIVA 23.2.
            // getRandomWord: function () { 
            //       // luetaan sanat tiedostosta listalle
            //         $.ajax({
            //         url:'sanat.txt',
            //         success: function (data){
            //             //pilkotaan tiedoston rivit taulukkoon 
            //             let lines = data.split('\n');
            //             let sanalista = new Array;
            //             for (let i = 0; i < lines.length; i++) {
            //                 sanalista.push(lines[i]);
            //             }
            //             console.log("Sanat lisätty listaan");
            //             return sanalista;
            //             }
            //         });
            //     }   
        }
    });

    
        //axioksen source
    </script>
    <script src="https://cdn.jsdelivr.net/npm/axios@0.12.0/dist/axios.min.js"></script>
    <script
    src="https://code.jquery.com/jquery-3.4.1.min.js"
    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
    crossorigin="anonymous"></script>
  </body>
</html>
